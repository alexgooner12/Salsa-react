(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){},241:function(e,t,a){e.exports=a(440)},246:function(e,t,a){},440:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(96),o=a.n(c),i=a(12),l=(a(246),a(7)),u=a(8),s=a(11),d=a(9),p=a(10),m=a(38),f=a(448),h=a(449),g=a(235);a(106);function b(){return r.a.createElement(f.a,{collapseOnSelect:!0,expand:"lg",bg:"light",variant:"dark"},r.a.createElement(f.a.Toggle,{className:"background","aria-controls":"responsive-navbar-nav"}),r.a.createElement(f.a.Collapse,{className:"justify-content-center",id:"responsive-navbar-nav"},r.a.createElement(h.a,{className:"navigation--custom"},r.a.createElement(g.a,null,r.a.createElement(i.c,{exact:!0,activeClassName:"active-link",className:"navigation__link",to:"/"},"Schedule page")),r.a.createElement(g.a,null,r.a.createElement(i.c,{exact:!0,activeClassName:"active-link",className:"navigation__link",to:"/dance-move-page"},"Dance page")),r.a.createElement(g.a,null,r.a.createElement(i.c,{exact:!0,activeClassName:"active-link",className:"navigation__link",to:"/group-list-page"},"Group page")),r.a.createElement(g.a,null,r.a.createElement(i.c,{exact:!0,activeClassName:"active-link",className:"navigation__link",to:"/registration-page"},"Registration page")),r.a.createElement(g.a,null,r.a.createElement(i.c,{exact:!0,activeClassName:"active-link",className:"navigation__link",to:"/profile-page"},"Profile page")),r.a.createElement(g.a,null,r.a.createElement(i.c,{exact:!0,activeClassName:"active-link",className:"navigation__link",to:"/payment-page"},"Payment page")),r.a.createElement(g.a,null,r.a.createElement(i.c,{exact:!0,activeClassName:"active-link",className:"navigation__link",to:"/members-page"},"Members page")),r.a.createElement(g.a,null,r.a.createElement(i.c,{exact:!0,activeClassName:"active-link",className:"navigation__link",to:"/attendance-page"},"Attendance page")))))}var v=a(6),E=a(447),y=a(442);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach(function(t){Object(v.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var M=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).getEditingValue=function(e,t){a.setState({updatedDanceMove:j({},a.state.updatedDanceMove,Object(v.a)({},e,t.target.value))})},a.handleCancel=function(){a.setState({editingMode:!1,updatedDanceMove:a.state.danceMove})},a.handleSave=function(e){e.preventDefault(),a.setState({editingMode:!1}),a.props.editDanceMove(a.state.updatedDanceMove.id,a.state.updatedDanceMove)},a.handleEdit=function(e){e.preventDefault(),a.setState({editingMode:!0})},a.handleDelete=function(){a.props.deleteDanceMove(a.state.danceMove.id)},a.state={editingMode:!1,danceMove:a.props.danceMove,updatedDanceMove:a.props.danceMove},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({danceMove:e.danceMove,updatedDanceMove:e.danceMove})}},{key:"render",value:function(){var e=this;return r.a.createElement("tr",{id:this.state.updatedDanceMove.id,key:this.state.updatedDanceMove.id},this.state.editingMode?r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,r.a.createElement(E.a.Control,{type:"text",value:this.state.updatedDanceMove.name,onChange:function(t){return e.getEditingValue("name",t)}})),r.a.createElement("td",null,r.a.createElement(E.a.Control,{as:"select",id:this.state.updatedDanceMove.id,value:this.state.updatedDanceMove.difficulty,onChange:function(t){return e.getEditingValue("difficulty",t)}},r.a.createElement("option",{value:"beginner"},"beginner"),r.a.createElement("option",{value:"intermidiate"},"intermidiate"),r.a.createElement("option",{value:"advanced"},"advanced"))),r.a.createElement("td",null,r.a.createElement(y.a,{variant:"success",id:this.state.updatedDanceMove.id,onClick:this.handleSave},"Save")),r.a.createElement("td",null,r.a.createElement(y.a,{variant:"warning",id:this.state.updatedDanceMove.id,onClick:this.handleCancel},"Cancel"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,this.state.danceMove.name),r.a.createElement("td",null,this.state.danceMove.difficulty),r.a.createElement("td",null,r.a.createElement(y.a,{variant:"warning",id:this.state.danceMove.id,onClick:this.handleEdit},"Edit")),r.a.createElement("td",null,r.a.createElement(y.a,{variant:"danger",id:this.state.danceMove.id,onClick:this.handleDelete},"Delete"))))}}]),t}(r.a.Component),D=a(18),S=a(104),P=a.n(S);a(260);P.a.initializeApp({apiKey:"AIzaSyDxVYW4cXJqGtwr_M_zH-1NQZjKI8bFVts",authDomain:"salsa-react.firebaseapp.com",databaseURL:"https://salsa-react.firebaseio.com",projectId:"salsa-react",storageBucket:"",messagingSenderId:"173610295926",appId:"1:173610295926:web:25c86e54b3cd9842"});var L=P.a.firestore(),C=P.a;function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach(function(t){Object(v.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var A="ADD_DANCE_MOVE",N="EDIT_DANCE_MOVE",G="DELETE_DANCE_MOVE",_=a(443),F=a(237),T=a(444),V=a(19),x=a(15);function R(e,t){if(!e.length||!function(e,t){return e.find(function(e){return e.name===t.name})}(e,t))return t;alert("".concat(t.name," has been added"))}var I=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).componentWillReceiveProps=function(e){a.setState({danceList:e.danceList})},a.handleDanceMove=function(e,t){a.setState(Object(v.a)({},e,t.target.value))},a.handleAddDanceMove=function(e){e.preventDefault(),a.addDanceMove(),a.clearState()},a.addDanceMove=function(){var e=R(a.props.danceList,a.createDanceMove());e&&a.props.addDanceMove(e)},a.createDanceMove=function(){return Object.assign({},{name:a.state.name,difficulty:a.state.difficulty})},a.clearState=function(){a.setState({name:"",difficulty:""})},a.sortDanceMoves=function(e){var t=a.sortDanceMovesBySelectedValue(e.target.value);a.setState({danceList:t})},a.sortDanceMovesBySelectedValue=function(e){return Array.from(a.state.danceList).sort(function(t,a){return t[e]>a[e]?-1:1})},a.state={name:"",difficulty:"",danceList:a.props.danceList},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"heading heading--secondary"},"Dance List"),r.a.createElement(E.a,{onSubmit:this.handleAddDanceMove},r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(F.a,{sm:{span:3,offset:3},md:{span:3,offset:4}},r.a.createElement(E.a.Control,{type:"text",placeholder:"Add a dance move",value:this.state.name,onChange:function(t){return e.handleDanceMove("name",t)},required:!0})),r.a.createElement(F.a,{sm:{span:2,offset:0}},r.a.createElement(E.a.Control,{className:"dance-list-select",as:"select",value:this.state.difficulty,onChange:function(t){return e.handleDanceMove("difficulty",t)},required:!0},r.a.createElement("option",{value:""},"Pick difficulty"),r.a.createElement("option",{value:"beginner"},"beginner"),r.a.createElement("option",{value:"intermediate"},"intermediate"),r.a.createElement("option",{value:"advanced"},"advanced"))),r.a.createElement(y.a,{className:"dance-list-button",variant:"success",type:"submit"},"Confirm"))),this.props.danceList&&this.props.danceList.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{column:!0,sm:{span:1,offset:7}},"Sort by"),r.a.createElement(F.a,{sm:{span:2}},r.a.createElement(E.a.Control,{as:"select",onChange:this.sortDanceMoves},r.a.createElement("option",{value:"difficulty"},"difficulty"),r.a.createElement("option",{value:"danceMove"},"name")))),r.a.createElement(T.a,{striped:!0,hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"DanceMove"),r.a.createElement("th",null,"Difficulty"))),r.a.createElement("tbody",null,this.state.danceList.length?this.state.danceList.map(function(t){return r.a.createElement(M,{key:t.id,danceMove:t,deleteDanceMove:e.props.deleteDanceMove,editDanceMove:e.props.editDanceMove})}):null))):null)}}]),t}(r.a.Component);var W=Object(x.d)(Object(D.b)(function(e){return{danceList:e.danceList}},function(e){return{addDanceMove:function(t){return e((a=t,function(e){L.collection("danceList").add(k({},a)).then(function(t){e({type:A,payload:{newDanceMove:a,id:t.id}})}).catch(function(e){return console.log(e)})}));var a},editDanceMove:function(t,a){return e(function(e,t){return function(a){L.collection("danceList").doc(e).update(k({},t)).then(function(){a({type:N,payload:{id:e,updatedDanceMove:t}})}).catch(function(e){return console.log(e)})}}(t,a))},deleteDanceMove:function(t){return e(function(e){return function(t){L.collection("danceList").doc(e).delete().then(function(){t({type:G,payload:{id:e}})}).catch(function(e){return console.log(e)})}}(t))}}}),Object(V.firestoreConnect)([{collection:"danceList"}]))(I);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach(function(t){Object(v.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var U=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).getEditingValue=function(e,t){a.setState({updatedGroup:B({},a.state.updatedGroup,Object(v.a)({},e,t.target.value))})},a.handleCancel=function(){a.setState({editingMode:!1,updatedGroup:a.state.group})},a.handleSave=function(e){e.preventDefault(),a.setState({editingMode:!1}),a.props.editGroup(a.state.updatedGroup.id,a.state.updatedGroup)},a.handleEdit=function(e){e.preventDefault(),a.setState({editingMode:!0})},a.handleDelete=function(){a.props.deleteGroup(a.state.group.id)},a.state={editingMode:!1,group:a.props.group,updatedGroup:a.props.group},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({group:e.group,updatedGroup:e.group})}},{key:"render",value:function(){var e=this;return r.a.createElement("tr",{id:this.state.updatedGroup.id,key:this.state.updatedGroup.id},this.state.editingMode?r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,r.a.createElement(E.a.Control,{type:"text",value:this.state.updatedGroup.name,onChange:function(t){return e.getEditingValue("name",t)}})),r.a.createElement("td",null,r.a.createElement(y.a,{variant:"success",id:this.state.updatedGroup.id,onClick:this.handleSave},"Save")),r.a.createElement("td",null,r.a.createElement(y.a,{variant:"warning",id:this.state.updatedGroup.id,onClick:this.handleCancel},"Cancel"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,this.state.group.name),r.a.createElement("td",null,r.a.createElement(y.a,{variant:"warning",id:this.state.group.id,onClick:this.handleEdit},"Edit")),r.a.createElement("td",null,r.a.createElement(y.a,{variant:"danger",id:this.state.group.id,onClick:this.handleDelete},"Delete"))))}}]),t}(r.a.Component);function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach(function(t){Object(v.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var J="ADD_GROUP",H="EDIT_GROUP",z="DELETE_GROUP",K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).getGroupValue=function(e){a.setState({name:e.target.value})},a.handleAddGroup=function(e){e.preventDefault(),a.addGroup(),a.clearState()},a.addGroup=function(){var e=R(a.props.groupList,a.createGroup());e&&a.props.addGroup(e)},a.createGroup=function(){return Object.assign({},{name:a.state.name})},a.clearState=function(){a.setState({name:""})},a.state={name:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"heading heading--secondary"},"Group List"),r.a.createElement(E.a,{onSubmit:this.handleAddGroup},r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(F.a,{sm:{span:4,offset:3},md:{span:4,offset:4}},r.a.createElement(E.a.Control,{type:"text",placeholder:"Add a group",value:this.state.name,onChange:this.getGroupValue})),r.a.createElement(y.a,{className:"button--custom",variant:"success",type:"submit"},"Confirm"))),this.props.groupList.length?r.a.createElement(T.a,{striped:!0,hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name of the group"))),r.a.createElement("tbody",null,this.props.groupList.map(function(t){return r.a.createElement(U,{key:t.id,group:t,editGroup:e.props.editGroup,deleteGroup:e.props.deleteGroup})}))):null)}}]),t}(r.a.Component);var Q=Object(x.d)(Object(D.b)(function(e){return{groupList:e.groupList}},function(e){return{addGroup:function(t){return e((a=t,function(e){L.collection("groupList").add(Y({},a)).then(function(t){e({type:J,payload:{newGroup:a,id:t.id}})}).catch(function(e){return console.log(e)})}));var a},editGroup:function(t,a){return e(function(e,t){return function(a){L.collection("groupList").doc(e).update(Y({},t)).then(function(){a({type:H,payload:{id:e,updatedGroup:t}})}).catch(function(e){return console.log(e)})}}(t,a))},deleteGroup:function(t){return e(function(e){return function(t){L.collection("groupList").doc(e).delete().then(function(){t({type:z,payload:{id:e}})}).catch(function(e){return console.log(e)})}}(t))}}}),Object(V.firestoreConnect)([{collection:"groupList"}]))(K),Z=a(445),$=["january","february","march","april","may","june","july","august","september","october","november","december"];function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(a,!0).forEach(function(t){Object(v.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ae="ADD_PAYER",ne="EDIT_PAYER",re="DISABLE_PAYER",ce="RESTORE_PAYER",oe="TOGGLE_PAYMENT",ie=function(e){var t=new Date(e.startDate).getMonth();return $.slice(t)};function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(a,!0).forEach(function(t){Object(v.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var se="ADD_ATTENDANCE",de="EDIT_ATTENDANCE",pe="DELETE_ATTENDANCE",me="TOGGLE_ATTENDANT",fe="EDIT_ATTENDANT",he=function(e,t,a){var n=$[new Date(e.date).getMonth()],r=t().memberList,c=ge(r,e);return Object.assign({},ue({},e,{month:n,possibleAttendants:c,scheduleId:a}))},ge=function(e,t){return e.filter(function(e){return be(e,t)}).map(function(e){return ve(e,t)})},be=function(e,t){var a=new Date(t.date),n=new Date(e.startDate);if(e.group===t.group&&n<=a)return e},ve=function(e,t){return Object.assign({},{name:e.name,id:e.id,date:t.date,hasAttended:!1})},Ee=function(e,t){return function(a){!function(e,t,a){t.hasAttended?function(e,t,a){ye(e,a).then(function(){return function(e,t,a){L.collection("memberList").doc(e.id).update({danceMoves:t.danceMoves}).then(function(){a({type:Ce,payload:{attendant:e,danceMoves:t.danceMoves}})})}(t,e,a)})}(e,t,a):function(e,t,a){ye(e,a).then(function(){return function(e,t,a){var n=function(e,t){var a=[];return L.collection("memberList").get().then(function(n){return n.forEach(function(n){n.id===e.id&&(a=n.data().danceMoves.filter(function(e){return!t.danceMoves.includes(e)}))})}),a}(e,t);L.collection("memberList").doc(e.id).update({danceMoves:n}).then(function(){a({type:we,payload:{attendant:e,danceMoves:t.danceMoves}})})}(t,e,a)})}(e,t,a)}(e,t,a)}};function ye(e,t){return L.collection("attendanceList").doc(e.id).update(e).then(function(){t({type:me,payload:{updatedAttendance:e}})})}function Oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function je(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oe(a,!0).forEach(function(t){Object(v.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Me="ADD_MEMBER",De="EDIT_MEMBER",Se="DISABLE_MEMBER",Pe="RESTORE_MEMBER",Le="SORT_MEMBERS",Ce="ADD_DANCE_MOVES_TO_ATTENDANT",we="REMOVE_DANCE_MOVES_FROM_ATTENDANT",ke=function(e){return function(t){L.collection("memberList").add(je({},e)).then(function(a){return t({type:Me,payload:{newMember:e,id:a.id}}),function(e,t){var a=ie(e);return Object.assign({},{name:e.name,isDisabled:!1,payments:a.map(function(e){return Object.assign({},{month:e,hasPaid:!1})}),memberId:t.id})}(e,a)}).then(function(e){return function(e,t){L.collection("paymentList").add(e).then(function(a){return t({type:ae,payload:{newPayer:e,id:a.id}})}).catch(function(e){return console.log(e)})}(e,t)})}},Ae=function(e,t){return function(a){L.collection("memberList").doc(e).update(je({},t)).then(function(){a({type:De,payload:{id:e,updatedMember:t}})}).then(function(){return function(e,t){L.collection("paymentList").get().then(function(a){return a.forEach(function(a){if(a.data().memberId===e.id){var n=Object.assign({},te({},a.data(),{id:a.id,name:e.name}));L.collection("paymentList").doc(a.id).update(n).then(function(){return t({type:ne,payload:{id:a.id,updatedPayer:n}})})}})})}(t,a)}).then(function(){return function(e,t){L.collection("attendanceList").get().then(function(a){return a.forEach(function(a){var n=Array.from(a.data().possibleAttendants),r=n.find(function(t){return t.id===e.id});if(r){var c=Object.assign({},ue({},r,{name:e.name})),o=n.map(function(e){return e.id===c.id?c:e}),i=Object.assign({},ue({},a.data(),{possibleAttendants:o}));L.collection("attendanceList").doc(a.id).update(i).then(function(){t({type:fe,payload:{updatedAttendance:i}})})}})})}(t,a)})}},Ne=function(e){return function(t){L.collection("memberList").doc(e).update({isDisabled:!0}).then(function(){t({type:Se,payload:{id:e}})}).then(function(){return function(e,t){L.collection("paymentList").get().then(function(a){return a.forEach(function(a){a.data().memberId===e&&L.collection("paymentList").doc(a.id).update({isDisabled:!0}).then(function(){return t({type:re,payload:{id:a.id}})})})})}(e,t)})}},Ge=function(e){return function(t){L.collection("memberList").doc(e).update({isDisabled:!1}).then(function(){t({type:Pe,payload:{id:e}})}).then(function(){return function(e,t){L.collection("paymentList").get().then(function(a){return a.forEach(function(a){a.data().memberId===e&&L.collection("paymentList").doc(a.id).update({isDisabled:!1}).then(function(){return t({type:ce,payload:{id:a.id}})})})})}(e,t)})}},_e=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).getMemberValues=function(e,t){a.setState(Object(v.a)({},e,t.target.value))},a.handleAddMember=function(e){e.preventDefault(),a.addMember(),a.clearState()},a.addMember=function(){var e=R(a.props.memberList,a.createMember());e&&a.props.addMember(e)},a.createMember=function(){return Object.assign({},a.state)},a.clearState=function(){a.setState({name:"",gender:"",foundOutFrom:"",startDate:"",group:""})},a.state={name:"",gender:"",foundOutFrom:"",startDate:"",group:"",danceMoves:[],isDisabled:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.props.groupList.length?r.a.createElement(Z.a,{fluid:!0},r.a.createElement("h2",{className:"heading heading--secondary"},"Add a member"),r.a.createElement(E.a,{onSubmit:this.handleAddMember},r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{htmlFor:"input-name",column:!0,sm:{span:2,offset:3}},"Name"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{type:"text",id:"input-name",placeholder:"Name",value:this.state.name,onChange:function(t){return e.getMemberValues("name",t)},required:!0}))),r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{htmlFor:"input-gender",column:!0,sm:{span:2,offset:3}},"Gender"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{as:"select",id:"input-gender",value:this.state.gender,onChange:function(t){return e.getMemberValues("gender",t)},required:!0},r.a.createElement("option",{value:""},"Pick a gender"),r.a.createElement("option",{value:"male"},"Male"),r.a.createElement("option",{value:"female"},"Female")))),r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{htmlFor:"input-found-out-from",column:!0,sm:{span:2,offset:3}},"Found out from"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{type:"text",id:"input-found-out-from",placeholder:"Found out from",value:this.state.foundOutFrom,onChange:function(t){return e.getMemberValues("foundOutFrom",t)},required:!0}))),r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{htmlFor:"input-date",column:!0,sm:{span:2,offset:3}},"Start Date"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{type:"date",id:"input-date",placeholder:"Start date",value:this.state.startDate,onChange:function(t){return e.getMemberValues("startDate",t)},required:!0}))),r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{htmlFor:"input-group",column:!0,sm:{span:2,offset:3}},"Group"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{as:"select",id:"input-group",value:this.state.group,onChange:function(t){return e.getMemberValues("group",t)},required:!0},r.a.createElement("option",{disabled:!0,value:""},"Pick a group"),this.props.groupList.map(function(e){return r.a.createElement("option",{key:e.id},e.name)})))),r.a.createElement(y.a,{variant:"success",type:"submit"},"Confirm"))):r.a.createElement("div",{className:"instructions"},r.a.createElement(i.b,{to:"/group-list-page"},"Click to create a group"))}}]),t}(r.a.Component);var Fe=Object(x.d)(Object(D.b)(function(e){return{memberList:e.memberList,groupList:e.groupList}},function(e){return{addMember:function(t){return e(ke(t))}}}),Object(V.firestoreConnect)([{collection:"memberList"}]))(_e),Te=a(17),Ve=a(446),xe=a(239);function Re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Re(a,!0).forEach(function(t){Object(v.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Re(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var We=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).getEditingValues=function(e,t){"danceMoves"===e?a.addNewDanceMove(t):a.setState({updatedProfile:Ie({},a.state.updatedProfile,Object(v.a)({},e,t.target.value))})},a.addNewDanceMove=function(e){var t=a.validateNewDanceMove(e);t&&a.setState({updatedProfile:Ie({},a.state.updatedProfile,{danceMoves:[].concat(Object(Te.a)(a.state.updatedProfile.danceMoves),[t])})})},a.validateNewDanceMove=function(e){if(!a.state.updatedProfile.danceMoves.includes(e.target.value)&&e.target.value)return e.target.value},a.deleteSelectedDanceMove=function(e){var t=a.state.updatedProfile.danceMoves.filter(function(t){return t!==e});a.setState({updatedProfile:Ie({},a.state.updatedProfile,{danceMoves:t})})},a.handleCancel=function(){a.setState({editingMode:!1,updatedProfile:a.state.profile})},a.handleSave=function(e){e.preventDefault(),a.setState({editingMode:!1}),a.props.editMember(a.state.updatedProfile.id,a.state.updatedProfile)},a.handleEdit=function(e){e.preventDefault(),a.setState({editingMode:!0})},a.handleDisable=function(){a.props.disableMember(a.state.profile.id)},a.state={editingMode:!1,profile:a.props.profile,updatedProfile:a.props.profile},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({profile:e.profile,updatedProfile:e.profile})}},{key:"render",value:function(){var e=this;return r.a.createElement("article",{key:this.state.profile.id,id:this.state.profile.id},this.state.editingMode?r.a.createElement(E.a,null,r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{column:!0,sm:{span:2,offset:3}},"Name"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{type:"text",value:this.state.updatedProfile.name,onChange:function(t){return e.getEditingValues("name",t)}}))),r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{column:!0,sm:{span:2,offset:3}},"Gender"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{as:"select",value:this.state.updatedProfile.gender,onChange:function(t){return e.getEditingValues("gender",t)}},r.a.createElement("option",{value:"male"},"Male"),r.a.createElement("option",{value:"female"},"Female")))),r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{column:!0,sm:{span:2,offset:3}},"Started on"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{type:"date",value:this.state.updatedProfile.startDate,onChange:function(t){return e.getEditingValues("startDate",t)}}))),r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{column:!0,sm:{span:2,offset:3}},"Found out from"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{type:"text",value:this.state.updatedProfile.foundOutFrom,onChange:function(t){return e.getEditingValues("foundOutFrom",t)}}))),r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{column:!0,sm:{span:2,offset:3}},"Group"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{as:"select",value:this.state.updatedProfile.group,onChange:function(t){return e.getEditingValues("group",t)}},this.props.groupList.map(function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name)})))),r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{column:!0,sm:{span:2,offset:3}},"Dance moves"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{as:"select",onChange:function(t){return e.getEditingValues("danceMoves",t)}},r.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select a dance move"),this.props.danceList.map(function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name)})))),r.a.createElement(E.a.Group,null,r.a.createElement(Ve.a,null,this.state.updatedProfile.danceMoves.map(function(t,a){return r.a.createElement(xe.a,{key:a},t,r.a.createElement(y.a,{variant:"danger",onClick:function(a){return e.deleteSelectedDanceMove(t,a)}},"X"))}))),r.a.createElement(y.a,{variant:"success",id:this.state.profile.id,onClick:this.handleSave},"Save"),r.a.createElement(y.a,{variant:"warning",id:this.state.profile.id,onClick:this.handleCancel},"Cancel")):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,this.state.profile.name),r.a.createElement("p",null,"Gender ",this.state.profile.gender),r.a.createElement("p",null,"Started on ",this.state.profile.startDate),r.a.createElement("p",null,"Found out from ",this.state.profile.foundOutFrom),r.a.createElement("p",null,"Member of ",this.state.profile.group," group"),r.a.createElement("p",null,"Dance moves"),r.a.createElement(Ve.a,null,this.state.profile.danceMoves.length?this.state.profile.danceMoves.map(function(e,t){return r.a.createElement(xe.a,{style:{background:"#89D0FF",border:0},key:t},e)}):r.a.createElement(xe.a,{style:{background:"#89D0FF",border:0}},this.state.profile.name," doesn't know any dance moves yet")),r.a.createElement(y.a,{variant:"warning",id:this.state.profile.id,onClick:this.handleEdit},"Edit"),r.a.createElement(y.a,{variant:"danger",id:this.state.profile.id,onClick:this.handleDisable},"Disable")))}}]),t}(r.a.Component),qe=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.props.memberList.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"heading heading--secondary"},"Profile Page"),r.a.createElement(Ve.a,null,this.props.memberList.length?this.props.memberList.map(function(t){return t.isDisabled?r.a.createElement(xe.a,{key:t.id},t.name,r.a.createElement(y.a,{variant:"info",onClick:function(){return e.props.restoreMember(t.id)}},"Restore")):r.a.createElement(We,{key:t.id,profile:t,editMember:e.props.editMember,disableMember:e.props.disableMember,memberList:e.props.memberList,groupList:e.props.groupList,danceList:e.props.danceList})}):null)):r.a.createElement("div",{className:"instructions"},r.a.createElement(i.b,{to:"/registration-page"},"Create a member first"))}}]),t}(r.a.Component);var Be=Object(x.d)(Object(D.b)(function(e){return{memberList:e.memberList,groupList:e.groupList,danceList:e.danceList}},function(e){return{editMember:function(t,a){return e(Ae(t,a))},disableMember:function(t){return e(Ne(t))},restoreMember:function(t){return e(Ge(t))}}}),Object(V.firestoreConnect)([{collection:"memberList"}]))(qe),Ue=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=function(){a.setCurrentMonth()},a.setCurrentMonth=function(){var e=(new Date).getMonth();a.setState({currentMonth:$[e]})},a.getSelectedMonth=function(e){a.setState({currentMonth:e.target.value})},a.handleTogglePayment=function(e){var t=a.getSelectedPayer(e),n=a.getSelectedPayment(t);n.hasPaid=!n.hasPaid,a.props.togglePayment(t)},a.getSelectedPayer=function(e){return a.props.paymentList.find(function(t){return t.id===e.target.id})},a.getSelectedPayment=function(e){return e.payments.find(function(e){return e.month===a.state.currentMonth})},a.state={currentMonth:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.props.paymentList.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"heading heading--secondary"},"Payment Page"),r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(F.a,{sm:{span:2,offset:6}},r.a.createElement(E.a.Label,null,"See payments for")),r.a.createElement(F.a,{sm:{span:2}},r.a.createElement(E.a.Control,{as:"select",value:this.state.currentMonth,onChange:this.getSelectedMonth,required:!0},r.a.createElement("option",{value:""},"Pick a month"),$.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))),r.a.createElement(T.a,{striped:!0,hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Paid"))),r.a.createElement("tbody",null,this.props.paymentList.length?this.props.paymentList.map(function(t){if(!t.isDisabled)return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.name),t.payments.map(function(a,n){if(a.month===e.state.currentMonth)return r.a.createElement("td",{key:n},r.a.createElement(E.a.Check,{type:"checkbox",id:t.id,checked:a.hasPaid,onChange:function(t){return e.handleTogglePayment(t)}}))}))}):r.a.createElement("div",{className:"instructions"},r.a.createElement("p",null,"Create a Member first"),r.a.createElement(i.b,{to:"/registration-page"},"Click to create a member"))))):r.a.createElement("div",{className:"instructions"},r.a.createElement(i.b,{to:"/registration-page"},"Create a member first"))}}]),t}(r.a.Component);var Xe=Object(x.d)(Object(D.b)(function(e){return{groupList:e.groupList,memberList:e.memberList,paymentList:e.paymentList}},function(e){return{togglePayment:function(t){return e((a=t,function(e){L.collection("paymentList").doc(a.id).update(te({},a)).then(function(){return e({type:oe,payload:{updatedPayer:a}})})}));var a}}}),Object(V.firestoreConnect)([{collection:"paymentList"}]))(Ue),Ye=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).handleSorting=function(e){a.props.sortMembers(e.target.value)},a.renderMemberList=function(){return a.props.memberList.sort(function(e,t){return e[a.props.sortingCriterium]>t[a.props.sortingCriterium]?1:-1}).filter(function(e){return!e.isDisabled}).map(function(e){return r.a.createElement("tr",{key:e.id,id:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.group),r.a.createElement("td",null,e.startDate),r.a.createElement("td",null,e.foundOutFrom))})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.memberList.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"heading heading--secondary"},"Members Page"),r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a.Group,{as:_.a,className:"justify-content-md-center"},r.a.createElement(E.a.Label,{column:!0,sm:{span:1,offset:6},htmlFor:"sort-members"},"Sort by"),r.a.createElement(F.a,{sm:{span:2}},r.a.createElement(E.a.Control,{as:"select",id:"sort-members",onChange:this.handleSorting},r.a.createElement("option",{value:"group"},"Group"),r.a.createElement("option",{value:"startDate"},"Date"),r.a.createElement("option",{value:"name"},"Name")))),r.a.createElement(T.a,{striped:!0,responsive:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Group"),r.a.createElement("th",null,"Started on"),r.a.createElement("th",null,"Found out from"))),r.a.createElement("tbody",null,this.renderMemberList())))):r.a.createElement("div",{className:"instructions"},r.a.createElement(i.b,{to:"/add-members-page"},"Create a member first"))}}]),t}(r.a.Component);var Je=Object(D.b)(function(e){return{memberList:e.memberList,sortingCriterium:e.sortingCriterium}},function(e){return{sortMembers:function(t){return e(function(e){return function(t){t({type:Le,payload:{sortingCriterium:e}})}}(t))}}})(Ye);function He(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?He(a,!0).forEach(function(t){Object(v.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):He(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ke=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).getEditingValues=function(e,t){"danceMoves"===e?a.addDanceMove(t):a.setState({updatedSchedule:ze({},a.state.updatedSchedule,Object(v.a)({},e,t.target.value))})},a.addDanceMove=function(e){var t=a.validateDanceMove(e);t&&a.setState({updatedSchedule:ze({},a.state.updatedSchedule,{danceMoves:[].concat(Object(Te.a)(a.state.updatedSchedule.danceMoves),[t])})})},a.validateDanceMove=function(e){if(!a.state.updatedSchedule.danceMoves.includes(e.target.value))return e.target.value;alert("".concat(e.target.value," already exists"))},a.handleCancel=function(){a.setState({editingMode:!1,updatedSchedule:a.state.schedule})},a.handleSave=function(e){e.preventDefault(),a.setState({editingMode:!1}),a.props.editSchedule(a.state.updatedSchedule.id,a.state.updatedSchedule)},a.deleteSelectedDanceMove=function(e){var t=a.state.updatedSchedule.danceMoves.filter(function(t,a){return a!==e});a.setState({updatedSchedule:Object.assign({},{group:a.state.updatedSchedule.group,id:a.state.updatedSchedule.id,date:a.state.updatedSchedule.date,danceMoves:t})})},a.handleEdit=function(e){e.preventDefault(),a.setState({editingMode:!0})},a.handleDelete=function(){a.props.deleteSchedule(a.state.schedule.id)},a.state={editingMode:!1,schedule:a.props.schedule,updatedSchedule:a.props.schedule,selectedDanceMove:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({schedule:e.schedule,updatedSchedule:e.schedule})}},{key:"render",value:function(){var e=this;return r.a.createElement(xe.a,{style:{background:"#89D0FF",border:0},className:"list-item"},this.state.editingMode?r.a.createElement(E.a,null,r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{column:!0,sm:{span:2,offset:4},htmlFor:this.state.updatedSchedule.group},"Group"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{as:"select",value:this.state.updatedSchedule.group,onChange:function(t){return e.getEditingValues("group",t)}},this.props.groupList.map(function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name)})))),r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{column:!0,sm:{span:2,offset:4},htmlFor:this.state.updatedSchedule.date},"Date"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{type:"date",value:this.state.updatedSchedule.date,onChange:function(t){return e.getEditingValues("date",t)}}))),r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{column:!0,sm:{span:2,offset:4},htmlFor:this.state.updatedSchedule.danceMoves},"Dance moves"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{as:"select",value:this.state.selectedDanceMove,onChange:function(t){return e.getEditingValues("danceMoves",t)}},this.props.danceList.map(function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name)}),r.a.createElement("option",{disabled:!0,value:""},"Pick a dance move")))),r.a.createElement(Ve.a,null,this.state.updatedSchedule.danceMoves.map(function(t,a){return r.a.createElement(xe.a,{key:a},t,r.a.createElement(y.a,{variant:"danger",onClick:function(t){return e.deleteSelectedDanceMove(t)}},"X"))})),r.a.createElement(y.a,{variant:"success",onClick:this.handleSave},"Save"),r.a.createElement(y.a,{variant:"warning",onClick:this.handleCancel},"Cancel")):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Schedule for ",this.state.schedule.group," group "),r.a.createElement("p",null,"Class is scheduled on ",this.state.schedule.date),r.a.createElement("p",null,"Dance moves to be practiced:"),r.a.createElement(Ve.a,null,this.state.schedule.danceMoves.map(function(e,t){return r.a.createElement(F.a,{key:t,sm:{span:2,offset:5}},r.a.createElement(xe.a,null,e))})),r.a.createElement(y.a,{variant:"warning",onClick:this.handleEdit},"Edit"),r.a.createElement(y.a,{variant:"danger",id:this.state.schedule.id,onClick:this.handleDelete},"Delete")))}}]),t}(r.a.Component);function Qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qe(a,!0).forEach(function(t){Object(v.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var $e="ADD_SCHEDULE",et="EDIT_SCHEDULE",tt="DELETE_SCHEDULE",at=function(e){return function(t,a){L.collection("scheduleList").add(Ze({},e)).then(function(n){return t({type:$e,payload:{schedule:e,id:n.id}}),he(e,a,n.id)}).then(function(e){return function(e,t){L.collection("attendanceList").add(ue({},e)).then(function(a){return t({type:se,payload:{attendance:e,id:a.id}})})}(e,t)})}},nt=function(e){return function(t){L.collection("scheduleList").doc(e).delete().then(function(){t({type:tt,payload:{id:e}})}).then(function(){return function(e,t){L.collection("attendanceList").get().then(function(a){return a.forEach(function(a){a.data().scheduleId===e&&L.collection("attendanceList").doc(a.id).delete().then(function(){t({type:pe,payload:{id:a.id}})})})})}(e,t)})}},rt=function(e,t){return function(a,n){L.collection("scheduleList").doc(e).update(Ze({},t)).then(function(){return a({type:et,payload:{id:e,updatedSchedule:t}}),he(t,n,e)}).then(function(e){return function(e,t){L.collection("attendanceList").get().then(function(a){return a.forEach(function(a){if(a.data().scheduleId===e.id){var n=Object.assign({},ue({},e,{id:a.id}));L.collection("attendanceList").doc(a.id).update(ue({},e)).then(function(){t({type:de,payload:{id:a.id,updatedAttendance:n}})})}})})}(e,a)})}};function ct(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ot(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ct(a,!0).forEach(function(t){Object(v.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ct(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var it=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).getScheduleValues=function(e,t){"danceMoves"===e?a.addDanceMove(t.target.value):a.setState({schedule:ot({},a.state.schedule,Object(v.a)({},e,t.target.value))})},a.handleAddSchedule=function(e){e.preventDefault(),a.addSchedule(),a.clearState()},a.addSchedule=function(){var e=function(e,t){if(!e.length||!function(e,t){return e.find(function(e){return e.group===t.group&&e.date===t.date})}(e,t))return t;alert("Schedule for ".concat(t.group," on ").concat(t.date," has been created"))}(a.props.scheduleList,a.createSchedule());e&&a.props.addSchedule(e)},a.createSchedule=function(){return Object.assign({},{group:a.state.schedule.group,date:a.state.schedule.date,danceMoves:a.state.schedule.danceMoves})},a.clearState=function(){a.setState({schedule:{group:"",date:"",danceMoves:""}})},a.editSchedule=function(){a.setState({editingMode:!a.state.editingMode})},a.cancelEditingSchedule=function(){a.setState({editingMode:!a.state.editingMode})},a.deleteSelectedDanceMove=function(e){var t=a.state.schedule.danceMoves.filter(function(t,a){return a!==+e.target.id});a.setState({schedule:ot({},a.state.schedule,{danceMoves:t})})},a.state={schedule:{group:"",date:"",danceMoves:[],selectedDanceMove:""}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"addDanceMove",value:function(e){var t=this.validateDanceMove(e);t&&this.setState({schedule:ot({},this.state.schedule,{danceMoves:[].concat(Object(Te.a)(this.state.schedule.danceMoves),[t])})})}},{key:"validateDanceMove",value:function(e){if(!this.state.schedule.danceMoves.includes(e))return e;alert("".concat(e," has already been added"))}},{key:"render",value:function(){var e=this;return this.props.memberList.length&&this.props.danceList.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"heading heading--secondary"},"Schedule Page"),r.a.createElement(E.a,{onSubmit:this.handleAddSchedule},r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{column:!0,sm:{span:2,offset:4}},"Group"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{as:"select",value:this.state.schedule.group,onChange:function(t){return e.getScheduleValues("group",t)},multiple:!1,required:!0},r.a.createElement("option",{value:""},"Pick a group"),this.props.groupList.map(function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name)})))),r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{column:!0,sm:{span:2,offset:4}},"Date"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{type:"date",value:this.state.schedule.date,onChange:function(t){return e.getScheduleValues("date",t)},required:!0}))),r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{column:!0,sm:{span:2,offset:4}},"Dance moves"),r.a.createElement(F.a,{sm:{span:4}},r.a.createElement(E.a.Control,{as:"select",value:this.state.schedule.selectedDanceMove,onChange:function(t){return e.getScheduleValues("danceMoves",t)},multiple:!1,required:!0},this.props.danceList.map(function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name)}),r.a.createElement("option",{value:"",disabled:!0},"Pick dance moves")))),this.state.schedule.danceMoves.length?r.a.createElement("div",null,r.a.createElement("p",null,"List of new dance moves: "),r.a.createElement(Ve.a,null,this.state.schedule.danceMoves.map(function(t,a){return r.a.createElement(xe.a,{key:a},t,r.a.createElement(y.a,{variant:"danger",id:a,onClick:e.deleteSelectedDanceMove},"X"))}))):null,r.a.createElement(y.a,{variant:"success",type:"submit"},"Create schedule")),r.a.createElement(Ve.a,null,this.props.scheduleList.map(function(t){return r.a.createElement(Ke,{key:t.id,groupList:e.props.groupList,danceList:e.props.danceList,schedule:t,editingMode:e.state.editingMode,editSchedule:e.props.editSchedule,deleteSchedule:e.props.deleteSchedule})}))):r.a.createElement("div",{className:"instructions"},r.a.createElement("div",null,r.a.createElement(i.b,{to:"/dance-move-page"},"Click to create a dance list")),r.a.createElement("div",null,r.a.createElement(i.b,{to:"/registration-page"},"Click to create a member")))}}]),t}(r.a.Component);var lt=Object(x.d)(Object(D.b)(function(e){return{groupList:e.groupList,danceList:e.danceList,memberList:e.memberList,scheduleList:e.scheduleList}},function(e){return{addSchedule:function(t){return e(at(t))},editSchedule:function(t,a){return e(rt(t,a))},deleteSchedule:function(t){return e(nt(t))}}}),Object(V.firestoreConnect)([{collection:"scheduleList"}]))(it),ut=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).toggleAttendant=function(e,t){a.props.toggleAttendant(e,t)},a.state={attendance:a.props.attendance,updatedAttendance:a.props.attendance},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({attendance:e.attendance,updatedAttendance:e.attendance})}},{key:"render",value:function(){var e=this;return this.state.attendance.possibleAttendants.map(function(t){return r.a.createElement("tr",{id:t.id,key:t.id},r.a.createElement("td",null,t.name),r.a.createElement("td",null,e.state.attendance.group),r.a.createElement("td",null,e.state.attendance.date),r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",checked:t.hasAttended,onChange:function(){return e.toggleAttendant(t.id,e.state.attendance.id)}})))})}}]),t}(r.a.Component),st=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=function(){a.setCurrentMonth()},a.setCurrentMonth=function(){var e=(new Date).getMonth();a.setState({currentMonth:$[e]})},a.getSelectedMonth=function(e){a.setState({currentMonth:e.target.value})},a.handleToggleAttendant=function(e,t){var n=a.getSelectedAttendance(t),r=a.getSelectedAttendant(n,e);r.hasAttended=!r.hasAttended,a.props.toggleAttendant(n,r)},a.getSelectedAttendance=function(e){return a.props.attendanceList.find(function(t){return t.id===e})},a.getSelectedAttendant=function(e,t){return e.possibleAttendants.find(function(e){return e.id===t})},a.state={currentMonth:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.props.attendanceList.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"heading heading--secondary"},"Attendance Page"),r.a.createElement(E.a.Group,{as:_.a},r.a.createElement(E.a.Label,{column:!0,sm:{span:2,offset:6}},"See attendance for"),r.a.createElement(F.a,{sm:{span:2}},r.a.createElement(E.a.Control,{as:"select",value:this.state.currentMonth,onChange:this.getSelectedMonth},r.a.createElement("option",{value:"",disabled:!0},"Pick a month"),$.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))),r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{responsive:!0,striped:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Group"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Attended"))),r.a.createElement("tbody",null,this.props.attendanceList.map(function(t,a){return t.month===e.state.currentMonth?r.a.createElement(ut,{key:a,attendance:t,toggleAttendant:e.handleToggleAttendant}):null}))))):r.a.createElement("div",{className:"instructions"},r.a.createElement(i.b,{to:"/"},"Create a schedule first"))}}]),t}(r.a.Component);var dt=Object(x.d)(Object(D.b)(function(e){return{groupList:e.groupList,memberList:e.memberList,attendanceList:e.attendanceList}},function(e){return{toggleAttendant:function(t,a){return e(Ee(t,a))}}}),Object(V.firestoreConnect)([{collection:"attendanceList"}]))(st),pt=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(b,null),r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",render:function(){return r.a.createElement(lt,null)}}),r.a.createElement(m.a,{exact:!0,path:"/dance-move-page",render:function(){return r.a.createElement(W,null)}}),r.a.createElement(m.a,{exact:!0,path:"/group-list-page",render:function(){return r.a.createElement(Q,null)}}),r.a.createElement(m.a,{exact:!0,path:"/registration-page",render:function(){return r.a.createElement(Fe,null)}}),r.a.createElement(m.a,{exact:!0,path:"/profile-page",render:function(){return r.a.createElement(Be,null)}}),r.a.createElement(m.a,{exact:!0,path:"/payment-page",render:function(){return r.a.createElement(Xe,null)}}),r.a.createElement(m.a,{exact:!0,path:"/members-page",render:function(){return r.a.createElement(Je,null)}}),r.a.createElement(m.a,{exact:!0,path:"/attendance-page",render:function(){return r.a.createElement(dt,null)}}),r.a.createElement(m.a,{render:function(){return r.a.createElement("h2",null,"Not Found")}})))}}]),t}(r.a.Component),mt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ft(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var ht=a(240);function gt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function bt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gt(a,!0).forEach(function(t){Object(v.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function vt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Et(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vt(a,!0).forEach(function(t){Object(v.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var yt=a(71),Ot=Object(x.c)({danceList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return[].concat(Object(Te.a)(e),[{name:t.payload.newDanceMove.name,difficulty:t.payload.newDanceMove.difficulty,id:t.payload.id}]);case N:return e.map(function(e){return e.id===t.payload.id?t.payload.updatedDanceMove:e});case G:return e.filter(function(e){return e.id!==t.payload.id});default:return e}},groupList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return[].concat(Object(Te.a)(e),[{name:t.payload.newGroup.name,id:t.payload.id}]);case H:return e.map(function(e){return e.id===t.payload.id?t.payload.updatedGroup:e});case z:return e.filter(function(e){return e.id!==t.payload.id});default:return e}},scheduleList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $e:return[].concat(Object(Te.a)(e),[{group:t.payload.schedule.group,date:t.payload.schedule.date,danceMoves:t.payload.schedule.danceMoves,id:t.payload.id}]);case et:return e.map(function(e){return e.id===t.payload.id?t.payload.updatedSchedule:e});case tt:return e.filter(function(e){return e.id!==t.payload.id});default:return e}},memberList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Me:return[].concat(Object(Te.a)(e),[{group:t.payload.newMember.group,id:t.payload.id,name:t.payload.newMember.name,gender:t.payload.newMember.gender,foundOutFrom:t.payload.newMember.foundOutFrom,startDate:t.payload.newMember.startDate,danceMoves:t.payload.newMember.danceMoves,isDisabled:t.payload.newMember.isDisabled}]);case De:return e.map(function(e){return e.id===t.payload.id?t.payload.updatedMember:e});case Se:case Pe:return e.map(function(e){return e.id===t.payload.id?Object.assign({},bt({},e,{isDisabled:!e.isDisabled})):e});case Le:return Array.from(e).sort(function(e,a){return e[t.payload.sortingCriterium]>a[t.payload.sortingCriterium]?-1:1});case Ce:return e.map(function(e){return e.id===t.payload.attendant.id?Object.assign({},bt({},e,{danceMoves:[].concat(Object(Te.a)(e.danceMoves),Object(Te.a)(t.payload.danceMoves.filter(function(t){return!e.danceMoves.includes(t)})))})):e});case we:return e.map(function(e){return e.id===t.payload.attendant.id?Object.assign({},bt({},e,{danceMoves:e.danceMoves.filter(function(e){return!t.payload.danceMoves.includes(e)})})):e});default:return e}},paymentList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return[].concat(Object(Te.a)(e),[{name:t.payload.newPayer.name,isDisabled:t.payload.newPayer.isDisabled,payments:t.payload.newPayer.payments,memberId:t.payload.newPayer.memberId,id:t.payload.id}]);case ne:return e.map(function(e){return e.id===t.payload.id?t.payload.updatedPayer:e});case re:return e.map(function(e){return e.id===t.payload.id?Object.assign({},Et({},e,{isDisabled:!0})):e});case ce:return e.map(function(e){return e.id===t.payload.id?Object.assign({},Et({},e,{isDisabled:!1})):e});case oe:return e.map(function(e){return e.id===t.payload.updatedPayer.id?t.payload.updatedPayer:e});default:return e}},attendanceList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return[].concat(Object(Te.a)(e),[{date:t.payload.attendance.date,group:t.payload.attendance.group,possibleAttendants:t.payload.attendance.possibleAttendants,danceMoves:t.payload.attendance.danceMoves,scheduleId:t.payload.attendance.scheduleId,id:t.payload.id,month:t.payload.attendance.month}]);case de:return e.map(function(e){return e.id===t.payload.id?t.payload.updatedAttendance:e});case pe:return e.filter(function(e){return e.id!==t.payload.id});case me:return e.map(function(e){return e.id===t.payload.id?t.payload.updatedAttendance:e});case fe:return e.map(function(e){return e.scheduleId===t.payload.updatedAttendance.scheduleId?t.payload.updatedAttendance:e});default:return e}},firestore:yt.firestoreReducer}),jt=localStorage.getItem("reduxState")?JSON.parse(localStorage.getItem("reduxState")):{},Mt=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||x.d,Object(x.e)(Ot,jt,Object(x.d)(Object(x.a)(ht.a.withExtraArgument({getFirestore:yt.getFirestore,getFirebase:V.getFirebase})),Object(yt.reduxFirestore)(C),Object(V.reactReduxFirebase)(C))));Mt.subscribe(function(){console.log(Mt.getState())}),Mt.subscribe(function(){localStorage.setItem("reduxState",JSON.stringify(Mt.getState()))}),o.a.render(r.a.createElement(i.a,null,r.a.createElement(D.a,{store:Mt},r.a.createElement(pt,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Salsa-react",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/Salsa-react","/service-worker.js");mt?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ft(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ft(t,e)})}}()}},[[241,1,2]]]);
//# sourceMappingURL=main.4998c5a0.chunk.js.map